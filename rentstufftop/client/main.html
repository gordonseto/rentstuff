<template name="ApplicationLayout">
<head>
  <title>Rent stuff</title>
</head>
<div class="hometitle">
<a href="{{pathFor route='home'}}">
<h1>Rent stuff</h1>
</a>
</div>
  {{> navigation}}
  {{> yield}}
</template>

<template name="navigation" class="navigation">
  <a href="{{pathFor route='newPosting'}}">New Posting</a>
  {{#if currentUser}}
  <a href="{{pathFor route='account'}}">My Account</a>
  <a href="#" class="logout">Logout</a>
  {{else}}
  <a href="{{pathFor route='login'}}">Login</a>
  <a href="{{pathFor route='register'}}">Register</a>
  {{/if}}
</template>

<template name="home">
<!--<p> {{> searchbox}}</p>-->
<p> {{> displayPostings}}</p>
</template>

<template name="imageupload">
  <form id="postingimages">
    <input type="file" id="postingimage1" name="userimage1"/>
    <input type="file" id="postingimage2" name="userimage2"/>
    <button type="submit" class="submitimages">Upload</button>
  </form>
  <div class="image_holder">
  </div>
</template>
<!--
<template name="searchbox">
  
  {{> EasySearch.Input index=postingsIndex timeout=300}}
  <ul>
    {{#EasySearch.Each index=postingsIndex}}
      <a href="{{pathFor route='posting'}}">
      <span class="postPreview">
      <p>{{title}}</p>
      <p>Location: {{location}}</p>
      <p>{{rentalrate}} /day</p>
      </span>
      </a>
    {{/EasySearch.Each}}
  </ul>
</template>
-->

<template name="displayPostings">
  {{#each posting}}
    <a href="{{pathFor route='posting'}}">
    <span class="postPreview">
        <p>{{#with postingImages}}
              <img src="{{imageId.[0]}}">
            {{/with}}
        </p>
    <p>{{title}}</p>
    <p>Location: {{location}}</p>
    <p>{{rentalrate}} /day</p>
    </span>
    </a>
  {{/each}}
</template>

<template name="newPosting">
  <form>
  <p>Title: <input type="text" name="title" required></p>
  <p>Description: <input type="text" name="description"></p>
  <p>Location: <input type="text" name="location" required></p>
  <p>Rental rate: <input type="text" name="rentalrate" required> /day</p>
  <p>{{> imageupload}}</p>
  <p><input type="submit" value="Post"></p>
  </form>
</template>

<template name="posting">
  <p>Title: {{title}}</p>
  <p>Posted by: <a href="{{pathFor route='profile'}}">{{createdBy}}</a></p>
  <p>Description: {{description}}</p>
  <p>Location: {{location}}</p>
  <p>Rental rate: {{rentalrate}} /day</p>
  <p>Posted: {{createdAt}}</p>
  <p> {{#with postingImages}}
        {{#each imageId}}
          <img src="{{this}}">
        {{/each}}
      {{/with}}</p>
</template>

<template name="profile">
  {{#each posting}}
    <a href="{{pathFor route='posting'}}">
    <span class="postPreview">
      <p>{{#with postingImages}}
          <img src="{{imageId.[0]}}">
          {{/with}}
      </p>
    <p>{{title}}</p>
    <p>Location: {{location}}</p>
    <p>{{rentalrate}} /day</p>
    </span>
    </a>
{{/each}}
</template>

<template name="register">
  <h2>Register</h2>
  <form class="register">
  <p>Email: <input type="email" name="email" required></p>
  <p>Username: <input type="username" name="username" required></p>
  <p>Password: <input type="password" name="password" required></p>
  <p><input type="submit" value="Register"></p>
  </form>
</template>

<template name="login">
  <h2>Login</h2>
  <form class="login">
    <p>Email: <input type="email" name="email" required></p>
    <p>Password: <input type="password" name="password" required></p>
    <p><input type="submit" value="Login"></p>
  </form>
</template>

<template name="account">
  <h2>My Account</h2>
  <h3>My Postings:</h3>
  {{> accountPostings}}
</template>

<template name="accountPostings">
  {{#each posting}}
    <a href="{{pathFor route='posting'}}">
    <span class="postPreview">
      <p>{{#with postingImages}}
          <img src="{{imageId.[0]}}">
          {{/with}}
      </p>
    <p>{{title}}</p>
    <p>Location: {{location}}</p>
    <p>{{rentalrate}} /day</p>
    </span>
    </a>
{{/each}}
</template>